#!/bin/zsh

local list
read -r -d '' list <<-EOF
vim
frontend-dev
frontend-webpack
frontend-test-changed
frontend-test
ondemand
qmk-flash-dactyl
EOF

local cmd
cmd=$(echo $list | fzf) || exit 0
case "$cmd" in
    vim)
        kitty @launch --type tab --title vim  --cwd /opt/repos/frontend/reactUi zsh -is eval\
          "vim"
        ;;
    frontend-dev)
        kitty @launch --type tab --title scratch  --cwd /opt/repos/frontend/reactUi
        kitty @launch --type tab --title vim  --cwd /opt/repos/frontend/reactUi\
          /Users/stephanbadragan/bin/vim src/Application/ApplicationShell/ApplicationShell.jsx
        kitty @launch --type tab --title webpack  --cwd /opt/repos/frontend/reactUi zsh -is eval\
          "pnpm webpack-dev:cloud:hot --env customerUrl=kramerica.dev.xmatters.com"
        kitty @ focus-tab --match title:vim
        ;;
    frontend-webpack)
        kitty @launch --type tab --title webpack  --cwd /opt/repos/frontend/reactUi zsh -is eval\
          "pnpm webpack-dev:cloud:hot --env customerUrl=kramerica.dev.xmatters.com"
        ;;
    frontend-test-changed)
        kitty @launch --type tab --title frontend-test-changed  --cwd /opt/repos/frontend/reactUi zsh -is eval\
          "pnpm run test --watch --changedSince=origin/main"
        ;;
    frontend-test)
        kitty @launch --type tab --title frontend-test  --cwd /opt/repos/frontend/reactUi
        ;;
    ondemand)
        kitty @launch --type tab --title ondemand  --cwd /opt/repos/ondemand
        ;;
    qmk-flash-dactyl)
        kitty @launch --type tab --title frontend-test-changed  --cwd /opt/repos/qmk zsh -is eval\
          "qmk-flash-dactyl"
        ;;
    *)
        echo "No command defined for: $cmd"
        exit 1
        ;;
esac
